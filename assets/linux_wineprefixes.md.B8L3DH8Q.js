import{_ as t,c as i,o,aq as n}from"./chunks/framework.CkWLY5K4.js";const h=JSON.parse(`{"title":"Wineprefixes","description":"","frontmatter":{"0":"t","1":"i","2":"t","3":"l","4":"e","5":" ","6":"=","7":" ","8":"'","9":"W","10":"i","11":"n","12":"e","13":"p","14":"r","15":"e","16":"f","17":"i","18":"x","19":"e","20":"s","21":"'"},"headers":[],"relativePath":"linux/wineprefixes.md","filePath":"linux/wineprefixes.md","lastUpdated":1747549240000}`),s={name:"linux/wineprefixes.md"};function a(r,e,l,p,c,d){return o(),i("div",null,e[0]||(e[0]=[n('<h1 id="wineprefixes" tabindex="-1">Wineprefixes <a class="header-anchor" href="#wineprefixes" aria-label="Permalink to &quot;Wineprefixes&quot;">‚Äã</a></h1><p>What is a Wineprefix?<br> What is its function?<br> What is a ‚Äúclean‚Äù Wineprefix?</p><p>These are common questions, and here‚Äôs the answers to them</p><p>A WINEPREFIX is an environment variable.<br> It defines where Wine looks for its configuration and files, in essence where it puts its C: drive.<br> A clean prefix has no additional Windows components installed, often referred to as a vanilla wineprefix.</p><p><a href="https://askubuntu.com/questions/956244/what-is-a-wineprefix" target="_blank" rel="noreferrer">Source</a></p><p>Essentially, you can think of it like a mini Windows container.<br> Wine makes a fake Windows container and does the translation between your Linux code &amp; Windows instructions.<br> A wine prefix is the folder (or directory, same word) that has the C:\\ drive on your Linux system.<br> And so, you can have multiple wine prefixes. This is what we‚Äôre going to do.</p><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>On Linux, we like to have multiple wine prefixes that each do different things, and separate them because we don‚Äôt want their internal components to interfere with another, which can sometimes happen.</p></div><h2 id="how-do-i-make-a-wineprefix" tabindex="-1">How do I make a wineprefix? <a class="header-anchor" href="#how-do-i-make-a-wineprefix" aria-label="Permalink to &quot;How do I make a wineprefix?&quot;">‚Äã</a></h2><h3 id="main-wineprefixes" tabindex="-1">Main wineprefixes <a class="header-anchor" href="#main-wineprefixes" aria-label="Permalink to &quot;Main wineprefixes&quot;">‚Äã</a></h3><p>Here are the main wineprefixes we‚Äôll be needing to use for most cases.</p><ul><li>proton_ge</li><li>vanilla</li></ul><p>Some other prefixes for less common cases:</p><ul><li>wmp11quartz</li><li>lavfilters</li><li>mciqtz32</li><li>ffdshow</li><li>wmp11</li><li>xact</li><li>quartz_dx</li><li>wmp10quartz</li></ul><p>Usually the best course of action is trying to run the VN with proton_ge and vanilla prefixes since there are high chances that it will run fine with one of these two. If you have issues then try the other prefixes.</p><p>Make sure to run both <a href="./../all-platforms/jp-locale.html">Japanese Locale</a> and Fonts in the prefix if you have issues with text display.</p><h3 id="steps" tabindex="-1">Steps <a class="header-anchor" href="#steps" aria-label="Permalink to &quot;Steps&quot;">‚Äã</a></h3><ol><li><p>Create an empty folder with the name of every prefix you will be using.</p><p>You also can automate folder creation by using the console command (works on Steam Deck), example: <code>mkdir proton_ge wmp11quartz wmp11 xact wmp10quartz vanilla</code></p></li><li><p>Next, we‚Äôll setup each folder.</p><p>In Lutris, visit any game‚Äôs config and enter these settings</p><p>Game Options:</p><ul><li><strong>Wine prefix</strong>: <strong>path_to_your_wineprefix_folder</strong> (The location of the folder we made in step 1)</li><li><strong>Prefix architecture</strong>: <strong>64bit</strong> (<strong>32bit</strong> for wmp10 &amp; wmp10quartz)</li></ul><p>Runner Options:</p><ul><li><strong>vanilla</strong> Prefix: <strong>Wine 10</strong>. Install from <a href="./protonup.html">protonUp-qt</a> Kron4ek Builds</li><li><strong>proton_ge</strong> Prefix: <strong>Proton-ge 9.13</strong> (Or newer versions). Install from <a href="./protonup.html">protonUp-qt</a></li><li><strong>Others</strong>: <strong>Lutris 7.2</strong> (default) (Do not pick Lutris 7.2.2 It has issues with video playback). Disable DXVK for this case.</li></ul></li><li><p>For each wineprefix folder, you‚Äôll want these components depending on their name.</p></li></ol><ul><li><p>Click the üç∑ wine bottle, and click <strong>Bash Terminal</strong>.</p></li><li><p>Copy the command (based on the name of the prefix), paste it into each Terminal using <strong>CTRL + SHIFT + V</strong></p></li><li><p>Hit <strong>Enter</strong> to input the command and wait for them to finish.</p></li><li><p><strong>vanilla</strong> (64bit): Needs Gstreamer libraries for video playback.</p><ul><li>System Lutris: Make sure you have this libraries installed in your system: <code>gstreamer gst-plugins-ugly gst-plugins-good gst-plugins-base-libs gst-plugins-base gst-plugins-bad gst-plugins-bad-libs gst-plugin-pipewire gst-libav lib32-gstreamer lib32-gst-plugins-base-libs</code></li><li>Flatpak Lutris or Steam Deck: Don&#39;t need to install anything since they come bundled in.</li></ul></li><li><p><strong>proton_ge</strong> (64bit): Doesn&#39;t need any extra components, should work out of the box.</p><ul><li>If using it outside of Steam, like in lutris you need to install umu-launcher.</li><li>Flatpak Lutris does not need umu-launcher, it&#39;s bundled in.</li></ul></li></ul><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>Go to <a href="./special-codecs.html">Special Codecs</a> and download it in some route like ~/Documents.</p><p>Make sure to change the path in following commands to where you downloaded it.</p></div><ul><li><p><strong>wmp11quartz</strong> (64bit): <code>sh ~/Documents/vn_winestuff-main/codec.sh wmp11 quartz2</code></p></li><li><p><strong>wmp11</strong> (64bit): <code>sh ~/Documents/vn_winestuff-main/codec.sh wmp11</code></p></li><li><p><strong>wmp10</strong> (32bit): <code>winetricks -q --force wmp10</code> (wmp10 install is currently borked, can&#39;t be used)</p></li><li><p><strong>wmp10quartz</strong> (32bit): <code>winetricks -q --force wmp10 &amp;&amp; sh ~/Documents/vn_winestuff-main/codec.sh quartz2</code> (wmp10 install is currently borked, can&#39;t be used)</p></li><li><p><strong>quartz_dx</strong> (64bit): <code>sh ~/Documents/vn_winestuff-main/codec.sh wmp11 quartz_dx</code></p></li><li><p><strong>lavfilters</strong> (64bit): <code>sh ~/Documents/vn_winestuff-main/codec.sh lavfilters</code></p></li><li><p><strong>xact</strong> (64bit): <code>winetricks -q --force xact</code></p></li><li><p><strong>mciqtz32</strong> (64bit): <code>sh ~/Documents/vn_winestuff-main/codec.sh mciqtz32</code></p></li><li><p><strong>ffdshow</strong> (64bit): <code>winetricks ffdshow</code> (You must manually enable ALL codecs for <strong>ffdshow</strong> (including MPEG-1/2!) when the pop up occurs at the end of the install.)</p><div class="warning custom-block github-alert"><p class="custom-block-title">Warning</p><p>If you change the Runner version you NEED to remake the prefix, all components will be overwritten by the defaults of Wine</p></div></li></ul><ol start="4"><li><p>Next, within each wineprefix folder, install the <a href="https://drive.google.com/file/d/1OiBgAmt3vPRu08gPpxFfzrtDgarBGszK/view" target="_blank" rel="noreferrer">Windows Japanese Fonts</a>.<br> To install, place your fonts in <strong>your_wineprefix/drive_c/Windows/Fonts</strong>. This ensures your VNs can load the right font.\\</p><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>If you want to save disk space you can symlink the fonts instead of copying them with: <br><code>ln -s &quot;~/Desktop/Fonts/&quot; ~/Games/wine_prefixes/wmp11quartz/drive_c/windows/</code> <br> Make sure to delete the Fonts folder inside the prefix beforehand.</p></div></li></ol><p>Great! All the wineprefixes are now setup</p><p>Check <a href="./../visual-novel-compatibility-list.html">visual novel compatibility list</a> to know what prefixes you need to utilize for each game. If the game is not in the list try prefixes for other games using the same engine or developer. If can&#39;t find anything try proton-ge as a good first generic prefix.</p><h2 id="special-tips" tabindex="-1">Special tips <a class="header-anchor" href="#special-tips" aria-label="Permalink to &quot;Special tips&quot;">‚Äã</a></h2><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>Starting from <a href="https://gitlab.winehq.org/wine/wine/-/releases/wine-9.22" target="_blank" rel="noreferrer">Wine 9.22</a> (staging) and <a href="https://gitlab.winehq.org/wine/wine/-/releases/wine-10.0#wayland-driver" target="_blank" rel="noreferrer">Wine 10.0</a> (stable), the native Wayland driver is enabled in default configuration. X11 driver still takes precedence if both are available but you can force its use by unsetting <code>DISPLAY</code> environment variable: <code>env -u DISPLAY wine bin.exe</code>. For Wine 9.21 and older, you need to run the following command to enable the driver: <code>wine reg add &#39;HKEY_CURRENT_USER\\Software\\Wine\\Drivers&#39; /v Graphics /t REG_SZ /d &#39;x11,wayland&#39;</code></p></div><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>Starting from Wine 10.0 (stable), <a href="https://gitlab.winehq.org/wine/wine/-/releases/wine-10.0#multimedia" target="_blank" rel="noreferrer">a new opt-in FFmpeg-based backend has been introduced</a>, as an alternative to the GStreamer backend. It can be enabled by setting the value <code>DisableGstByteStreamHandler=1</code> in the <code>HKCU\\Software\\Wine\\MediaFoundation</code> registry key.</p></div><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>A <a href="https://gitlab.winehq.org/wine/wine/-/wikis/Useful-Registry-Keys" target="_blank" rel="noreferrer">list of useful registry keys</a> is maintained on the official Wine Gitlab repository.</p></div><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>Do not use lutris 7.2.2 It has video playback issues. Lutris 7-x versions are pretty old at this point so if you want to change to newer versions feel free but it generally works fine and some codecs like mciqtz32 doesn&#39;t work with newer versions.</p></div><div class="info custom-block github-alert"><p class="custom-block-title">Info</p><p>wmp11_quartz can be installed in newer Proton prefixes too.</p></div><div class="warning custom-block github-alert"><p class="custom-block-title">warning</p><p>If you have any issues with video playback or old VNs lagging make sure DXVK is disabled.</p></div><div class="warning custom-block github-alert"><p class="custom-block-title">warning</p><p>If you have any issues rendering text in game make sure to have fonts in the prefix and use JP Locale variable <code>LANG=&quot;ja_JP.UTF-8&quot;</code>.</p></div><div class="warning custom-block github-alert"><p class="custom-block-title">Warning</p><p>wmp11&#39;s 32bit installer is broken, but <a href="https://github.com/Winetricks/winetricks/pull/1990" target="_blank" rel="noreferrer">we fixed it</a>. However, it‚Äôll take some time before it gets downstreamed to a Wine version we can generally use. For now, we have to use a 64bit prefix (as of April 21 2023) with Lutris 7.2.</p></div><h2 id="resources" tabindex="-1">Resources <a class="header-anchor" href="#resources" aria-label="Permalink to &quot;Resources&quot;">‚Äã</a></h2><h3 id="windows-fonts" tabindex="-1">Windows Fonts <a class="header-anchor" href="#windows-fonts" aria-label="Permalink to &quot;Windows Fonts&quot;">‚Äã</a></h3><p><a href="https://drive.google.com/file/d/1OiBgAmt3vPRu08gPpxFfzrtDgarBGszK/view" target="_blank" rel="noreferrer">https://drive.google.com/file/d/1OiBgAmt3vPRu08gPpxFfzrtDgarBGszK/view</a></p>',35)]))}const f=t(s,[["render",a]]);export{h as __pageData,f as default};
