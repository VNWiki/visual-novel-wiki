import{F as x,s as M,a as N,b as S,c as j}from"./theme.BjAuo7Fz.js";import{_ as V,p as n,q as B,v as L,c as i,o as s,j as c,G as f,k as r,w as m,F as p,B as O,b as T,t as b,a as E}from"./framework.CkWLY5K4.js";const R={class:"mb-2 flex items-center gap-3"},$={class:"p-input-icon-left w-64"},q=["href"],D={key:1,class:"bg-gray-100 px-1 py-0.5 rounded text-sm"},A=6,H={__name:"DataTable",props:{jsonPath:{type:String,required:!0},columns:{type:Array,required:!0},onHighlight:Function},setup(y){const k=y,{jsonPath:w,columns:v,onHighlight:h}=k,g=n([]),d=n(0),o=n({global:{value:null,matchMode:x.CONTAINS}}),u=n(null);function _(t){return Object.fromEntries(Object.entries(t).map(([a,e])=>[a.toLowerCase(),e]))}function F(t){if(h&&t.data){const a=t.data.notes||"";h(a),u.value=t.data}}function C(){o.value.global.value=null}return B(()=>o.value.global.value,()=>{d.value=0}),L(async()=>{try{const t=await fetch(w);if(!t.ok)throw new Error(`Failed to load JSON: ${t.status}`);const a=await t.json();g.value=a.map((e,l)=>({..._(e),id:l}))}catch(t){console.error("Error loading JSON:",t)}}),(t,a)=>(s(),i(p,null,[c("div",R,[f(r(M),{icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:C,"aria-label":"Clear search filters",class:"clear-filters-btn"}),c("span",$,[a[3]||(a[3]=c("i",{class:"pi pi-search","aria-hidden":"true"},null,-1)),f(r(N),{modelValue:o.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.global.value=e),placeholder:"Search...","aria-label":"Search table"},null,8,["modelValue"])])]),f(r(j),{value:g.value,filters:o.value,globalFilterFields:r(v).map(e=>e.field),paginator:!0,rows:A,first:d.value,onPage:a[1]||(a[1]=e=>d.value.value=e.first),responsiveLayout:"scroll",dataKey:"id",selectionMode:"single",selection:u.value,"onUpdate:selection":a[2]||(a[2]=e=>u.value=e),onRowClick:F},{default:m(()=>[(s(!0),i(p,null,O(r(v),e=>(s(),T(r(S),{key:e.field,field:e.field,header:e.header,sortable:e.sortable??!1},{body:m(l=>[e.isLink?(s(),i("a",{key:0,href:l.data[e.field],target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:underline"},b(l.data[e.field]),9,q)):e.isCode?(s(),i("code",D,b(l.data[e.field]),1)):(s(),i(p,{key:2},[E(b(l.data[e.field]),1)],64))]),_:2},1032,["field","header","sortable"]))),128))]),_:1},8,["value","filters","globalFilterFields","first","selection"])],64))}},U=V(H,[["__scopeId","data-v-2cd8b060"]]);export{U as M};
